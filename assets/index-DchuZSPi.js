(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();(function(){window.utils={shuffleArray(n){let e=n.slice();for(let t=e.length-1;t>0;t--){let i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}}})();class o{constructor(e,t,i){this.app=e,this.width=window.innerWidth,this.height=window.innerHeight,this.symbols=["assets/M00_000.jpg","assets/M01_000.jpg","assets/M02_000.jpg","assets/M03_000.jpg","assets/M04_000.jpg","assets/M05_000.jpg","assets/M06_000.jpg","assets/M07_000.jpg","assets/M08_000.jpg","assets/M10_000.jpg","assets/M11_000.jpg","assets/M12_000.jpg"],this.reelWidth=t,this.reelHeight=i,this.reels=[],this.isPlaying=!1,this.createReels(),this.createSpinButton()}createReels(){this.reelContainer=new PIXI.Container,this.reelContainer.x=this.app.screen.width*.035,this.app.stage.addChild(this.reelContainer);for(let e=0;e<5;e++){const t=new PIXI.Container;t.x=e*this.reelWidth,t.scale.set(2),this.reelContainer.addChild(t),this.reels.push(t);for(let i=0;i<12;i++){const s=PIXI.Sprite.from(window.utils.shuffleArray(this.symbols)[i]);s.y=i*this.reelHeight,s.scale.set(1),t.addChild(s)}}}createSpinButton(){const e=new PIXI.Graphics;e.beginFill(0),e.drawRect(0,this.app.screen.height*.65,this.app.screen.width,250),e.endFill(),this.app.stage.addChild(e);const t=new PIXI.Text("Spin",{fontSize:72,fill:"#FFF"});t.interactive=!0,t.buttonMode=!0,t.x=this.app.renderer.width/2-t.width/2,t.y=this.app.renderer.height*.75,this.app.stage.addChild(t),t.on("pointerdown",()=>{this.isPlaying||(this.isPlaying=!0,this.start())})}start(){for(const e of this.reels)this.spinReel(e)}spinReel(e){const t=gsap.utils.random(1,12,1);e.children.forEach(i=>{gsap.timeline({onComplete:()=>{this.isPlaying=!1}}).to(i,1,{y:i.y+this.reelHeight*t,ease:"back.out(.5)"}).pause().restart()})}loop(e){for(const t of this.reels)t.children.forEach(i=>{i.y+i.height*.5>=this.reelHeight*12&&(i.y-=this.reelHeight*12)})}}class h{constructor(){this.create()}create(){this.app=new PIXI.Application({width:800,height:600,transparent:!1,antialias:!0}),this.app.gameContainer=new PIXI.Container,this.app.stage.addChildAt(this.app.gameContainer,0),document.body.appendChild(this.app.view),window.app=this.app,this.slotMachine=new o(app,150,65)}start(){this.app.ticker.add(e=>this.loop(e))}stop(){this.app.ticker.stop()}loop(e){this.slotMachine.loop(e)}}const l=new h;l.start();
